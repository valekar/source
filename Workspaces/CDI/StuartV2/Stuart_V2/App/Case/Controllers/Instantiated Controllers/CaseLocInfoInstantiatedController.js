

function States() {

    return [
            { id: '', value: '' },
            { id: 'AL', value: 'Alabama' },
            { id: 'AK', value: 'Alaska' },
            { id: 'AZ', value: 'Arizona' },
            { id: 'AR', value: 'Arkansas' },
            { id: 'CA', value: 'California' },
            { id: 'CO', value: 'Colorado' },
            { id: 'CT', value: 'Connecticut' },
            { id: 'DE', value: 'Delaware' },
            { id: 'DC', value: 'District of Columbia' },
            { id: 'FL', value: 'Florida' },
            { id: 'GA', value: 'Georgia' },
            { id: 'HI', value: 'Hawaii' },
            { id: 'ID', value: 'Idaho' },
            { id: 'IL', value: 'Illinois' },
            { id: 'IN', value: 'Indiana' },
            { id: 'IA', value: 'Iowa' },
            { id: 'KS', value: 'Kansas'},
            { id: 'KY', value: 'Kentucky' },
            { id: 'LA', value: 'Louisiana' },
            { id: 'ME', value: 'Maine' },
            { id: 'MD', value: 'Maryland' },
            { id: 'MA', value: 'Massachusetts' },
            { id: 'MI', value: 'Michigan' },
            { id: 'MN', value: 'Minnesota' },
            { id: 'MS', value: 'Mississippi' },
            { id: 'MO', value: 'Missouri' },
            { id: 'MT', value: 'Montana' },
            { id: 'NE', value: 'Nebraska' },
            { id: 'NV', value: 'Nevada' },
            { id: 'NH', value: 'New Hampshire' },
            { id: 'NJ', value: 'New Jersey' },
            { id: 'NM', value: 'New Mexico' },
            { id: 'NY', value: 'New York' },
            { id: 'NC', value: 'North Carolina' },
            { id: 'ND', value: 'North Dakota' },
            { id: 'OH', value: 'Ohio' },
            { id: 'OK', value: 'Oklahoma' },
            { id: 'OR', value: 'Oregon' },
            { id: 'PA', value: 'Pennsylvania' },
            { id: 'RI', value: 'Rhode Island' },
            { id: 'SC', value: 'South Carolina' },
            { id: 'SD', value: 'South Dakota' },
            { id: 'TN', value: 'Tennessee' },
            { id: 'TX', value: 'Texas' },
            { id: 'UT', value: 'Utah' },
            { id: 'VT', value: 'Vermont' },
            { id: 'VA', value: 'Virginia' },
            { id: 'WA', value: 'Washington' },
            { id: 'WV', value: 'West Virginia' },
            { id: 'WI', value: 'Wisconsin' },
            { id: 'WY', value: 'Wyoming' },
            { id: 'AS', value: 'American Samoa' },
            { id: 'GU', value: 'Guam' },
            { id: 'MP', value: 'North Mariana Islands' },
            { id: 'PR', value: 'Puerto Rico' },
            { id: 'VI', value: 'Virgin Islands' },
            { id: 'AA', value: 'Armed Forces Americas' },
            { id: 'AE', value: 'Armed Forces Eur.,Mid.East,Africa,Canada' },
            { id: 'AP', value: 'Armed Forces Pacific' },
            { id: 'AB', value: 'Alberta' },
            { id: 'BC', value: 'British Columbia' },
            { id: 'MB', value: 'Manitoba' },
            { id: 'NB', value: 'New Brunswick' },
            { id: 'NF', value: 'Newfoundland' },
            { id: 'NT', value: 'Northwest Territories' },
            { id: 'NS', value: 'Nova Scotia' },
            { id: 'NU', value: 'Nunavut' },
            { id: 'ON', value: 'Ontario' },
            { id: 'PE', value: 'Prince Edward Island' },
            { id: 'QC', value: 'Quebec' },
            { id: 'SK', value: 'Saskatchewan' },
            { id: 'YT', value: 'Yukon Territory' },
            { id: 'FM', value: 'Federated States of Micronesia' },
            { id: 'MH', value: 'Marshall Islands' },
            { id: 'PW', value: 'Palau Island' }
    ]
}

function sourceSystems() {
    return [
    { id: '', value: '' },
    { id: 'ATG', value: 'ATG' },
    { id: 'ATGO', value: 'ATGO' },
    { id: 'BADW', value: 'BADW' },
    { id: 'CAS2', value: 'CAS2' },
    { id: 'CNVO', value: 'CNVO' },
    { id: 'DRMS', value: 'DRMS' },
    { id: 'ENTO', value: 'ENTO' },
    { id: 'ePID', value: 'ePID' },
    { id: 'ESCR', value: 'ESCR' },
    { id: 'HEMO', value: 'HEMO' },
    { id: 'HSIP', value: 'HSIP' },
    { id: 'LEXN', value: 'LEXN' },
    { id: 'LNHH', value: 'LNHH' },
    { id: 'MDON', value: 'MDON' },
    { id: 'NBCS', value: 'NBCS' },
    { id: 'PHSF', value: 'PHSF' },
    { id: 'SABA', value: 'SABA' },
    { id: 'SABO', value: 'SABO' },
    { id: 'SFFS', value: 'SFFS' },
    { id: 'STRX', value: 'STRX' },
    { id: 'TAFS', value: 'TAFS' },
    { id: 'TPGS', value: 'TPGS' },
    { id: 'VMS', value: 'VMS' }
    ]
}

function chapterSystems() {
    return [
        { id: '', value: '' },
       { value: 'C018', id: 'C018' },
                    { value: 'C046', id: 'C046' },
                    { value: 'C052', id: 'C052' },
                    { value: 'C053', id: 'C053' },
                    { value: 'C062', id: 'C062' },
                    { value: 'C066', id: 'C066' },
                    { value: 'C071', id: 'C071' },
                    { value: 'C106', id: 'C106' },
                    { value: 'C109', id: 'C109' },
                    { value: 'C111', id: 'C111' },
                    { value: 'C131', id: 'C131' },
                    { value: 'C132', id: 'C132' },
                    { value: 'C183', id: 'C183' },
                    { value: 'C184', id: 'C184' },
                    { value: 'C186', id: 'C186' },
                    { value: 'C211', id: 'C211' },
                    { value: 'C227', id: 'C227' },
                    { value: 'C255', id: 'C255' },
                    { value: 'C256', id: 'C256' },
                    { value: 'C292', id: 'C292' },
                    { value: 'C303', id: 'C303' },
                    { value: 'C308', id: 'C308' },
                    { value: 'C322', id: 'C322' },
                    { value: 'C325', id: 'C325' },
                    { value: 'C363', id: 'C363' },
                    { value: 'C368', id: 'C368' },
                    { value: 'C382', id: 'C382' },
                    { value: 'C388', id: 'C388' },
                    { value: 'C391', id: 'C391' },
                    { value: 'C402', id: 'C402' },
                    { value: 'C431', id: 'C431' },
                    { value: 'C438', id: 'C438' },
                    { value: 'C474', id: 'C474' },
                    { value: 'C478', id: 'C478' },
                    { value: 'C491', id: 'C491' },
                    { value: 'C496', id: 'C496' },
                    { value: 'C497', id: 'C497' },
                    { value: 'D102', id: 'D102' },
                    { value: 'D109', id: 'D109' },
                    { value: 'D132', id: 'D132' },
                    { value: 'D134', id: 'D134' },
                    { value: 'D171', id: 'D171' },
                    { value: 'D223', id: 'D223' },
                    { value: 'D224', id: 'D224' },
                    { value: 'D239', id: 'D239' },
                    { value: 'D251', id: 'D251' },
                    { value: 'D302', id: 'D302' },
                    { value: 'D324', id: 'D324' },
                    { value: 'D326', id: 'D326' },
                    { value: 'D328', id: 'D328' },
                    { value: 'D361', id: 'D361' },
                    { value: 'D433', id: 'D433' },
                    { value: 'D436', id: 'D436' },
                    { value: 'D474', id: 'D474' },
                    { value: 'EMLT', id: 'EMLT' },
                    { value: 'F058', id: 'F058' },
                    { value: 'F102', id: 'F102' },
                    { value: 'F142', id: 'F142' },
                    { value: 'F225', id: 'F225' },
                    { value: 'G359', id: 'G359' },
                    { value: 'G384', id: 'G384' },
                    { value: 'H351', id: 'H351' },
                    { value: 'H387', id: 'H387' },
                    { value: 'S', id: 'S' },
                    { value: 'S052', id: 'S052' },
                    { value: 'S062', id: 'S062' },
                    { value: 'S066', id: 'S066' },
                    { value: 'S071', id: 'S071' },
                    { value: 'S111', id: 'S111' },
                    { value: 'S131', id: 'S131' },
                    { value: 'S134', id: 'S134' },
                    { value: 'S142', id: 'S142' },
                    { value: 'S171', id: 'S171' },
                    { value: 'S183', id: 'S183' },
                    { value: 'S211', id: 'S211' },
                    { value: 'S322', id: 'S322' },
                    { value: 'S326', id: 'S326' },
                    { value: 'S351', id: 'S351' },
                    { value: 'S387', id: 'S387' },
                    { value: 'S402', id: 'S402' },
                    { value: 'S431', id: 'S431' },
                    { value: 'S438', id: 'S438' },
                    { value: 'SNHQ', id: 'SNHQ' },
                    { value: 'TPGS', id: 'TPGS' },
    ]
}



/********************* Add Case Loc Info Modal Instance ***************/
angular.module('case').controller('AddCaseLocInfoInstantiateCtrl', ['$scope', '$filter', '$uibModalInstance', '$uibModal',
    'params', 'CaseMultiDataService', 'CaseMultiGridService', 'uiGridConstants', 'CaseCRUDapiService', '$rootScope',
    'uibDateParser', 'CaseApiService', 'CaseCRUDoperations', 'CaseServices', 'CaseDataServices', function ($scope, $filter, $uibModalInstance, $uibModal,
    params, CaseMultiDataService, CaseMultiGridService, uiGridConstants, CaseCRUDapiService, $rootScope, uibDateParser, CaseApiService, CaseCRUDoperations, CaseServices, CaseDataServices) {
       // console.log("params");
       // console.log(params);
        $scope.caseLocInfo = {
            selected: {
                State: "",
                StateCode: "",
                sourceSystemType: "",
                sourceSystemTypeCode: "",
                chapterSystemType: "",
                chapterSystemTypeCode: ""
            },
            caseKey: params.case_key,
            States: States(),
            sourceSystems: sourceSystems(),
             chapterSystems: chapterSystems(),
            firstName: "",
            lastName: "",
            orgName: "",
            address: "",
            city: "",
            zip: "",
            phoneNum: "",
            email: "",
            masterID: "",
            constType: "IN",
            SourceSystemID: ""
        };

        $scope.submit = function () {
            if ($scope.myForm.$valid) {
                myApp.showPleaseWait();
                $scope.pleaseWait = { "display": "block" };
                var postParams = {
                    "req_typ": "INSERT",
                    "case_key": $scope.caseLocInfo.caseKey,
                    // "locator_id": $scope.caseLocInfo.caseDesc,
                    "locator_upd": "first_name|" + ($scope.caseLocInfo.firstName == null ? "" : $scope.caseLocInfo.firstName) + ",last_name|" + ($scope.caseLocInfo.lastName == null ? "" : $scope.caseLocInfo.lastName) + ",org_name|" + ($scope.caseLocInfo.orgName == null ? "" : $scope.caseLocInfo.orgName) + ",address_line|" + ($scope.caseLocInfo.address == null ? "" : $scope.caseLocInfo.address) + ",city|" + ($scope.caseLocInfo.city == null ? "" : $scope.caseLocInfo.city) + ",state|" + ($scope.caseLocInfo.selected.StateCode == null ? "" : $scope.caseLocInfo.selected.StateCode) + ",zip|" + ($scope.caseLocInfo.zip == null ? "" : $scope.caseLocInfo.zip) + ",phone_number|" + ($scope.caseLocInfo.phoneNum == null ? "" : $scope.caseLocInfo.phoneNum) + ",email_address|" + ($scope.caseLocInfo.email == null ? "" : $scope.caseLocInfo.email) + ",master_id|" + ($scope.caseLocInfo.masterID == null ? "" : $scope.caseLocInfo.masterID) + ",constituent_type|" + ($scope.caseLocInfo.constType == null ? "" : $scope.caseLocInfo.constType) + ",source_system|" + ($scope.caseLocInfo.selected.sourceSystemType == null ? "" : $scope.caseLocInfo.selected.sourceSystemType) + ",chapter_source_system|" + ($scope.caseLocInfo.selected.chapterSystemTypeCode == null ? "" : $scope.caseLocInfo.selected.chapterSystemTypeCode) + ",source_system_id|" + ($scope.caseLocInfo.SourceSystemID == null ? "" : $scope.caseLocInfo.SourceSystemID)
                };


                $('#modalCover').css("pointer-events", "none");
                //do something
                var output_msg;
                var trans_key;
                var finalMessage;
                var ReasonOrTransKey;
                var ConfirmationMessage;
               // console.log("Case Loc Add Post params");
               // console.log(postParams);
                CaseCRUDapiService.getCRUDOperationResult(postParams, CASE_CRUD_CONSTANTS.CASELOCINFO.ADD).success(function (result) {

                    output_msg = result[0].o_outputMessage;
                    trans_key = result[0].o_transaction_key;

                    if (output_msg == CASE_CRUD_CONSTANTS.PROCEDURE.SUCCESS) {
                        var output = {
                            finalMessage: CASE_CRUD_CONSTANTS.SUCCESS_MESSAGE,
                            //  ReasonOrTransKey: CASE_CRUD_CONSTANTS.SUCCESS_REASON + trans_key,
                            ConfirmationMessage: CASE_CRUD_CONSTANTS.SUCCESS_CONFIRM
                        }


                        CaseApiService.getApiDetails($scope.caseLocInfo.caseKey, CASE_CONSTANTS.CASE_LOCINFO).success(function (result) {
                          //  console.log("case key");
                           // console.log($scope.caseLocInfo.caseKey);
                            params.grid.data = '';
                            params.grid.data.length = 0;
                            params.grid.data = result;
                            CaseMultiDataService.setData(result, CASE_CONSTANTS.CASE_LOCINFO);

                            myApp.hidePleaseWait();

                            // emailData.push(PushParams);
                            $uibModalInstance.close(output);
                            messagePopup($rootScope, CASE_CRUD_CONSTANTS.SUCCESS_MESSAGE, CASE_CRUD_CONSTANTS.SUCCESS_CONFIRM);
                            // emailData.push(PushParams);

                        }).error(function (result) {
                            myApp.hidePleaseWait();
                            $uibModalInstance.close(output);
                            $scope.pleaseWait = { "display": "none" };
                            if (result == CASE_CRUD_CONSTANTS.SERVICE_TIMEOUT) {
                                messagePopup($rootScope, CASE_CRUD_CONSTANTS.SERVICE_TIMEOUT_MESSAGE, "Error: Timed Out");
                            }
                            else if (result == CASE_CRUD_CONSTANTS.DB_ERROR) {
                                messagePopup($rootScope, CASE_CRUD_CONSTANTS.DB_ERROR_MESSAGE, "Error: Timed Out");

                            }

                        });
                    }
                    else if (output_msg == CASE_CRUD_CONSTANTS.PROCEDURE.DUPLICATE || output_msg == CASE_CRUD_CONSTANTS.PROCEDURE.NOT_PRESENT) {
                        var output = {
                            finalMessage: CASE_CRUD_CONSTANTS.DUPLICATE_MSG,
                            ConfirmationMessage: CASE_CRUD_CONSTANTS.FAILURE_CONFIRM
                        }
                        myApp.hidePleaseWait();
                        $uibModalInstance.close(output);
                        messagePopup($rootScope, CASE_CRUD_CONSTANTS.DUPLICATE_MSG, CASE_CRUD_CONSTANTS.FAILURE_CONFIRM);
                    }
                    //else if (result.data == CASE_CRUD_CONSTANTS.ACCESS_DENIED) {
                    //    var output = {
                    //        finalMessage: CASE_CRUD_CONSTANTS.ACCESS_DENIED_MESSAGE,
                    //        ConfirmationMessage: CASE_CRUD_CONSTANTS.ACCESS_DENIED_CONFIRM
                    //    }
                    //    myApp.hidePleaseWait();
                    //    $uibModalInstance.close(output);
                    //}
                }).error(function (result) {
                    $scope.pleaseWait = { "display": "none" };
                    $uibModalInstance.close(output);
                    myApp.hidePleaseWait();
                    if (result == CASE_CRUD_CONSTANTS.ACCESS_DENIED) {
                        var output = {
                            finalMessage: CASE_CRUD_CONSTANTS.ACCESS_DENIED_MESSAGE,
                            ConfirmationMessage: CASE_CRUD_CONSTANTS.ACCESS_DENIED_CONFIRM
                        }
                        myApp.hidePleaseWait();
                        $uibModalInstance.close(output);
                    }
                    else if (result == CASE_CRUD_CONSTANTS.SERVICE_TIMEOUT) {
                        messagePopup($rootScope, CASE_CRUD_CONSTANTS.SERVICE_TIMEOUT_MESSAGE, "Error: Timed Out");
                    }
                    else if (result == CASE_CRUD_CONSTANTS.DB_ERROR) {
                        messagePopup($rootScope, CASE_CRUD_CONSTANTS.DB_ERROR_MESSAGE, "Error: Timed Out");

                    }

                });
            }

        };
        $scope.cancel = function () {
            $uibModalInstance.dismiss('cancel');
        };
    }]);



/********************* Edit Name Modal Instance ***************/
angular.module('case').controller('EditCaseLocInfoInstantiateCtrl', ['$scope', '$filter', '$uibModalInstance', '$uibModal',
    'params', 'CaseMultiDataService', 'CaseMultiGridService', 'uiGridConstants', 'CaseCRUDapiService', '$rootScope',
    'uibDateParser', 'CaseApiService', 'CaseCRUDoperations', 'CaseServices', 'CaseDataServices', function ($scope, $filter, $uibModalInstance, $uibModal,
    params, CaseMultiDataService, CaseMultiGridService, uiGridConstants, CaseCRUDapiService, $rootScope, uibDateParser, CaseApiService, CaseCRUDoperations, CaseServices, CaseDataServices) {
       // console.log("params");
       // console.log(params.row);
        var row = params.row;
        $scope.caseLocInfo = {
            selected: {
                State: "",
                StateCode: row.state_cd,
                sourceSystemType: row.srcsys,
                sourceSystemTypeCode: "",
                chapterSystemType: "",
                chapterSystemTypeCode: row.chpt_srcsys
            },
            caseKey: params.case_key,
            States: States(),
            sourceSystems: sourceSystems(),
            chapterSystems: chapterSystems(),
            firstName: row.f_nm,
            lastName: row.l_nm,
            orgName: row.ent_org_name,
            address: row.addr_line,
            city: row.city,
            zip: row.zip,
            phoneNum: row.phn_num,
            email: row.email_addr,
            masterID: row.cnst_mstr_id,
            constType: row.cnst_typ,
            SourceSystemID: row.srssys_id
        };

        $scope.submit = function () {
            if ($scope.myForm.$valid) {
                myApp.showPleaseWait();
                var postParams = {
                    "req_typ": "UPDATE",
                    "case_key": $scope.caseLocInfo.caseKey,
                    "locator_id": row.locator_id,
                    "locator_upd": "first_name|" + ($scope.caseLocInfo.firstName == null ? "" : $scope.caseLocInfo.firstName) + ",last_name|" + ($scope.caseLocInfo.lastName == null ? "" : $scope.caseLocInfo.lastName) + ",org_name|" + ($scope.caseLocInfo.orgName == null ? "" : $scope.caseLocInfo.orgName) + ",address_line|" + ($scope.caseLocInfo.address == null ? "" : $scope.caseLocInfo.address) + ",city|" + ($scope.caseLocInfo.city == null ? "" : $scope.caseLocInfo.city) + ",state|" + ($scope.caseLocInfo.selected.StateCode == null ? "" : $scope.caseLocInfo.selected.StateCode) + ",zip|" + ($scope.caseLocInfo.zip == null ? "" : $scope.caseLocInfo.zip) + ",phone_number|" + ($scope.caseLocInfo.phoneNum == null ? "" : $scope.caseLocInfo.phoneNum) + ",email_address|" + ($scope.caseLocInfo.email == null ? "" : $scope.caseLocInfo.email) + ",master_id|" + ($scope.caseLocInfo.masterID == null ? "" : $scope.caseLocInfo.masterID) + ",constituent_type|" + ($scope.caseLocInfo.constType == null ? "" : $scope.caseLocInfo.constType) + ",source_system|" + ($scope.caseLocInfo.selected.sourceSystemType == null ? "" : $scope.caseLocInfo.selected.sourceSystemType) + ",chapter_source_system|" + ($scope.caseLocInfo.selected.chapterSystemTypeCode == null ? "" : $scope.caseLocInfo.selected.chapterSystemTypeCode) + ",source_system_id|" + ($scope.caseLocInfo.SourceSystemID == null ? "" : $scope.caseLocInfo.SourceSystemID)
                };

                $('#modalCover').css("pointer-events", "none");
                //do something
                var output_msg;
                var trans_key;
                var finalMessage;
                var ReasonOrTransKey;
                var ConfirmationMessage;
               // console.log("Case Loc Add Post params");
               // console.log(postParams);
                CaseCRUDapiService.getCRUDOperationResult(postParams, CASE_CRUD_CONSTANTS.CASELOCINFO.EDIT).success(function (result) {

                    output_msg = result[0].o_outputMessage;

                    if (output_msg == CASE_CRUD_CONSTANTS.PROCEDURE.SUCCESS) {
                        var output = {
                            finalMessage: CASE_CRUD_CONSTANTS.EDIT_SUCCESS_MESSAGE,
                            ConfirmationMessage: CASE_CRUD_CONSTANTS.SUCCESS_CONFIRM
                        }



                        CaseApiService.getApiDetails($scope.caseLocInfo.caseKey, CASE_CONSTANTS.CASE_LOCINFO).success(function (result) {
                          //  console.log("case key");
                          //  console.log($scope.caseLocInfo.caseKey);
                            params.grid.data = '';
                            params.grid.data.length = 0;
                            params.grid.data = result;
                            CaseMultiDataService.setData(result, CASE_CONSTANTS.CASE_LOCINFO);

                            myApp.hidePleaseWait();

                            // emailData.push(PushParams);
                            $uibModalInstance.close(output);
                            messagePopup($rootScope, CASE_CRUD_CONSTANTS.EDIT_SUCCESS_MESSAGE, CASE_CRUD_CONSTANTS.SUCCESS_CONFIRM);
                            // emailData.push(PushParams);

                        }).error(function (result) {
                            myApp.hidePleaseWait();
                            $scope.pleaseWait = { "display": "none" };
                            $uibModalInstance.close(output);
                            if (result == CASE_CRUD_CONSTANTS.SERVICE_TIMEOUT) {
                                messagePopup($rootScope, CASE_CRUD_CONSTANTS.SERVICE_TIMEOUT_MESSAGE, "Error: Timed Out");
                            }
                            else if (result == CASE_CRUD_CONSTANTS.DB_ERROR) {
                                messagePopup($rootScope, CASE_CRUD_CONSTANTS.DB_ERROR_MESSAGE, "Error: Timed Out");

                            }

                        });
                    }
                    else if (output_msg == CASE_CRUD_CONSTANTS.PROCEDURE.DUPLICATE || output_msg == CASE_CRUD_CONSTANTS.PROCEDURE.NOT_PRESENT) {
                        var output = {
                            finalMessage: CASE_CRUD_CONSTANTS.EDIT_FAILURE_MESSAGE,
                            ConfirmationMessage: CASE_CRUD_CONSTANTS.FAILURE_CONFIRM
                        }
                        myApp.hidePleaseWait();
                        $uibModalInstance.close(output);
                        messagePopup($rootScope, CASE_CRUD_CONSTANTS.EDIT_FAILURE_MESSAGE, CASE_CRUD_CONSTANTS.FAILURE_CONFIRM);
                    }
                    //else if (result.data == CASE_CRUD_CONSTANTS.ACCESS_DENIED) {
                    //    var output = {
                    //        finalMessage: CASE_CRUD_CONSTANTS.ACCESS_DENIED_MESSAGE,
                    //        ConfirmationMessage: CASE_CRUD_CONSTANTS.ACCESS_DENIED_CONFIRM
                    //    }
                    //    myApp.hidePleaseWait();
                    //    $uibModalInstance.close(output);
                    //}
                }).error(function (result) {
                    myApp.hidePleaseWait();
                    $scope.pleaseWait = { "display": "none" };
                    $uibModalInstance.close(output);
                    if (result == CASE_CRUD_CONSTANTS.ACCESS_DENIED) {
                        var output = {
                            finalMessage: CASE_CRUD_CONSTANTS.ACCESS_DENIED_MESSAGE,
                            ConfirmationMessage: CASE_CRUD_CONSTANTS.ACCESS_DENIED_CONFIRM
                        }
                        myApp.hidePleaseWait();
                        $uibModalInstance.close(output);
                        messagePopup($rootScope, CASE_CRUD_CONSTANTS.FAIULRE_REASON, CASE_CRUD_CONSTANTS.FAILURE_CONFIRM);
                    }
                    else if (result == CASE_CRUD_CONSTANTS.SERVICE_TIMEOUT) {
                        messagePopup($rootScope, CASE_CRUD_CONSTANTS.SERVICE_TIMEOUT_MESSAGE, "Error: Timed Out");
                    }
                    else if (result == CASE_CRUD_CONSTANTS.DB_ERROR) {
                        messagePopup($rootScope, CASE_CRUD_CONSTANTS.DB_ERROR_MESSAGE, "Error: Timed Out");

                    }

                });
            }

        };
        $scope.cancel = function () {
            $uibModalInstance.dismiss('cancel');
        };
    }]);




/*********************Delete Name Modal Controller****************/
angular.module('case').controller('DeleteCaseLocInfoInstantiateCtrl', ['$scope', '$filter', '$uibModalInstance', '$uibModal',
    'params', 'CaseMultiDataService', 'CaseMultiGridService', 'uiGridConstants', 'CaseCRUDapiService', 'CaseServices', '$rootScope',
    'CaseUtilServices', 'uibDateParser', 'CaseApiService', 'CaseCRUDoperations', 'CaseDataServices', function ($scope, $filter, $uibModalInstance, $uibModal,
    params, CaseMultiDataService, CaseMultiGridService, uiGridConstants, CaseCRUDapiService, CaseServices, $rootScope, CaseUtilServices, uibDateParser, CaseApiService, CaseCRUDoperations) {
       // console.log("params");
       // console.log(params.row);
        var row = params.row;
        $scope.caseLocInfo = {
            selected: {
                State: "",
                StateCode: row.state_cd,
                sourceSystemType: row.srcsys,
                sourceSystemTypeCode: "",
                chapterSystemType: "",
                chapterSystemTypeCode: row.chpt_srcsys
            },
            caseKey: params.case_key,
            States: States(),
            sourceSystems: sourceSystems(),
            chapterSystems: chapterSystems(),
            firstName: row.f_nm,
            lastName: row.l_nm,
            orgName: row.ent_org_name,
            address: row.addr_line,
            city: row.city,
            zip: row.zip,
            phoneNum: row.phn_num,
            email: row.email_addr,
            masterID: row.cnst_mstr_id,
            constType: row.cnst_typ,
            SourceSystemID: row.srssys_id
        };

        $scope.submit = function () {
            if ($scope.myForm.$valid) {
                myApp.showPleaseWait();
                var postParams = {
                    "req_typ": "DELETE",
                    "case_key": $scope.caseLocInfo.caseKey,
                     "locator_id": row.locator_id,
                    "locator_upd": "first_name|" + ($scope.caseLocInfo.firstName == null ? "" : $scope.caseLocInfo.firstName) + ",last_name|" + ($scope.caseLocInfo.lastName == null ? "" : $scope.caseLocInfo.lastName) + ",org_name|" + ($scope.caseLocInfo.orgName == null ? "" : $scope.caseLocInfo.orgName) + ",address_line|" + ($scope.caseLocInfo.address == null ? "" : $scope.caseLocInfo.address) + ",city|" + ($scope.caseLocInfo.city == null ? "" : $scope.caseLocInfo.city) + ",state|" + ($scope.caseLocInfo.StateCode == null ? "" : $scope.caseLocInfo.StateCode) + ",zip|" + ($scope.caseLocInfo.zip == null ? "" : $scope.caseLocInfo.zip) + ",phone_number|" + ($scope.caseLocInfo.phoneNum == null ? "" : $scope.caseLocInfo.phoneNum) + ",email_address|" + ($scope.caseLocInfo.email == null ? "" : $scope.caseLocInfo.email) + ",master_id|" + ($scope.caseLocInfo.masterID == null ? "" : $scope.caseLocInfo.masterID) + ",constituent_type|" + ($scope.caseLocInfo.constType == null ? "" : $scope.caseLocInfo.constType) + ",source_system|" + ($scope.caseLocInfo.sourceSystemType == null ? "" : $scope.caseLocInfo.sourceSystemType) + ",chapter_source_system|" + ($scope.caseLocInfo.chapterSystemTypeCode == null ? "" : $scope.caseLocInfo.chapterSystemTypeCode) + ",source_system_id|" + ($scope.caseLocInfo.SourceSystemID == null ? "" : $scope.caseLocInfo.SourceSystemID)
                };

                $('#modalCover').css("pointer-events", "none");
                //do something
                var output_msg;
                var trans_key;
                var finalMessage;
                var ReasonOrTransKey;
                var ConfirmationMessage;
               // console.log("Case Loc Add Post params");
               // console.log(postParams);
                CaseCRUDapiService.getCRUDOperationResult(postParams, CASE_CRUD_CONSTANTS.CASELOCINFO.DELETE).success(function (result) {

                    output_msg = result[0].o_outputMessage;

                    if (output_msg == CASE_CRUD_CONSTANTS.PROCEDURE.SUCCESS) {
                        var output = {
                            finalMessage: CASE_CRUD_CONSTANTS.DELETE_SUCCESS_MESSAGE,
                            ConfirmationMessage: CASE_CRUD_CONSTANTS.SUCCESS_CONFIRM
                        }



                        CaseApiService.getApiDetails($scope.caseLocInfo.caseKey, CASE_CONSTANTS.CASE_LOCINFO).success(function (result) {
                           // console.log("case key");
                           // console.log($scope.caseLocInfo.caseKey);
                            params.grid.data = '';
                            params.grid.data.length = 0;
                            params.grid.data = result;
                            CaseMultiDataService.setData(result, CASE_CONSTANTS.CASE_LOCINFO);

                            myApp.hidePleaseWait();

                            // emailData.push(PushParams);
                            $uibModalInstance.close(output);
                            messagePopup($rootScope, CASE_CRUD_CONSTANTS.DELETE_SUCCESS_MESSAGE, CASE_CRUD_CONSTANTS.SUCCESS_CONFIRM);
                            // emailData.push(PushParams);

                        }).error(function (result) {
                            myApp.hidePleaseWait();
                            $scope.pleaseWait = { "display": "none" };
                            $uibModalInstance.close(output);
                            if (result == CASE_CRUD_CONSTANTS.SERVICE_TIMEOUT) {
                                messagePopup($rootScope, CASE_CRUD_CONSTANTS.SERVICE_TIMEOUT_MESSAGE, "Error: Timed Out");
                            }
                            else if (result == CASE_CRUD_CONSTANTS.DB_ERROR) {
                                messagePopup($rootScope, CASE_CRUD_CONSTANTS.DB_ERROR_MESSAGE, "Error: Timed Out");

                            }

                        });
                    }
                    else if (output_msg == CASE_CRUD_CONSTANTS.PROCEDURE.DUPLICATE || output_msg == CASE_CRUD_CONSTANTS.PROCEDURE.NOT_PRESENT) {
                        var output = {
                            finalMessage: CASE_CRUD_CONSTANTS.DELETE_FAILURE_MESSAGE,
                            ConfirmationMessage: CASE_CRUD_CONSTANTS.FAILURE_CONFIRM
                        }
                        myApp.hidePleaseWait();
                        $uibModalInstance.close(output);
                        messagePopup($rootScope, CASE_CRUD_CONSTANTS.DELETE_FAILURE_MESSAGE, CASE_CRUD_CONSTANTS.FAILURE_CONFIRM);
                    }
                    //else if (result.data == CASE_CRUD_CONSTANTS.ACCESS_DENIED) {
                    //    var output = {
                    //        finalMessage: CASE_CRUD_CONSTANTS.ACCESS_DENIED_MESSAGE,
                    //        ConfirmationMessage: CASE_CRUD_CONSTANTS.ACCESS_DENIED_CONFIRM
                    //    }
                    //    myApp.hidePleaseWait();
                    //    $uibModalInstance.close(output);
                    //}
                }).error(function (result) {
                    myApp.hidePleaseWait();
                    $scope.pleaseWait = { "display": "none" };
                    $uibModalInstance.close(output);
                    if (result == CASE_CRUD_CONSTANTS.ACCESS_DENIED) {
                        var output = {
                            finalMessage: CASE_CRUD_CONSTANTS.ACCESS_DENIED_MESSAGE,
                            ConfirmationMessage: CASE_CRUD_CONSTANTS.ACCESS_DENIED_CONFIRM
                        }
                        myApp.hidePleaseWait();
                        $uibModalInstance.close(output);
                        messagePopup($rootScope, CASE_CRUD_CONSTANTS.ACCESS_DENIED_MESSAGE, CASE_CRUD_CONSTANTS.ACCESS_DENIED_CONFIRM);
                    }
                    else if (result == CASE_CRUD_CONSTANTS.SERVICE_TIMEOUT) {
                        messagePopup($rootScope, CASE_CRUD_CONSTANTS.SERVICE_TIMEOUT_MESSAGE, "Error: Timed Out");
                    }
                    else if (result == CASE_CRUD_CONSTANTS.DB_ERROR) {
                        messagePopup($rootScope, CASE_CRUD_CONSTANTS.DB_ERROR_MESSAGE, "Error: Timed Out");

                    }

                });
            }

        };
        $scope.cancel = function () {
            $uibModalInstance.dismiss('cancel');
        };
    }]);
